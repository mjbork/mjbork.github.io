<script>
/* =========================================================
   Hero Title: Typewriter Sequence (Random Order)
   - Words type with "..." then delete
   - Final word "ORJM" also types (no ellipsis) and stays
========================================================= */
(function(){
  const target = document.getElementById('typeTarget');
  if(!target) return;

  // Words to shuffle through (will type with "...")
  const phrases = ["Signal", "Originality", "Alchemy", "Continuum", "Resonance", "Vision"];

  // Shuffle once per load (Fisherâ€“Yates)
  for (let i = phrases.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [phrases[i], phrases[j]] = [phrases[j], phrases[i]];
  }

  const TYPE_MS  = 58;   // per character typing speed
  const HOLD_MS  = 700;  // hold after finishing a word (with "...")
  const CLEAR_MS = 34;   // per character deletion speed

  target.classList.add('caret'); // blinking caret

  function typeText(text, withEllipsis, holdMs, done){
    target.textContent = "";
    let i = 0;
    const full = withEllipsis ? (text + "...") : text;
    const id = setInterval(()=>{
      target.textContent = full.slice(0, i++);
      if (i > full.length) {
        clearInterval(id);
        if (holdMs && holdMs > 0) {
          setTimeout(()=> done && done(), holdMs);
        } else {
          done && done();
        }
      }
    }, TYPE_MS);
  }

  function clearText(done){
    const current = target.textContent;
    let i = current.length;
    const id = setInterval(()=>{
      i--;
      target.textContent = current.slice(0, i);
      if (i <= 0) {
        clearInterval(id);
        done && done();
      }
    }, CLEAR_MS);
  }

  function runSequence(list){
    let idx = 0;

    function next(){
      if (idx >= list.length) {
        // Final: type "ORJM" (no ellipsis), then settle
        typeText("ORJM", /*withEllipsis=*/false, /*holdMs=*/0, ()=>{
          target.classList.remove('caret'); // stop blinking after final type
        });
        return;
      }

      typeText(list[idx], /*withEllipsis=*/true, HOLD_MS, ()=>{
        clearText(()=>{
          idx++;
          next();
        });
      });
    }

    next();
  }

  // Kick off after a small delay so layout is ready
  setTimeout(()=> runSequence(phrases), 120);
})();
</script>
